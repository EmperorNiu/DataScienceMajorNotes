# 系统调用

### 目录管理的系统调用

- mkdir和rmdir

  分别用于创建和删除空目录

- link

  - 允许一个文件具有多个名字，按不同路径名出现

  - 一种典型的应用是允许开发小组的几个成员共享一个文件，同时该文件出现在每个人自己的目录下。

  - 每个文件都有一个唯一的数字: i-节点（i-node）号，i节点中存放有文件所有者以及该文件所占用的磁块等信息

  - 例

    ```c
    link("/usr/jim/memo", "/usr/ast/note");
    ```

  - 如果用unlink删除其中一个目录项，那另一个依然存在。如果删除所有目录项，系统发现没有人如何目录项指向该文件，则将这个文件从磁盘中移除。

- mount 挂载文件系统

  - mount系统调用可将两个文件系统合并成一个

  - ```c
    mount("/dev/cdrom0", "/mnt", 0);
    ```
- chdir 改变当前的工作目录
- chroot 改变根目录

### 安全管理
- 访问控制

  - 每个文件都有一个包含11个比特的保护方式码，其中的9比特标识文件所有者、同组用户和其他用户的操作权限。顺序：rwx

  - ```chmod("file", 0644);```
### 时间管理

  - time系统调用返回当前距1970年1月1日零时的时间，以秒为单位
  - stime用来设置系统时间（仅由超级用户执行）
  - utime允许文件所有者（或超级用户）修改存储在文件i-节点中的时间
  - times系统调用，它返回进程的计账信息

## 操作系统结构

### 整体结构

##### 定义：

​		整体式系统是最常用的组织方式，整个操作系统是一组函数的集合，每个函数都可以调用任意其他函数。系统中的每一过程都有一个定义完好的接口，即它的入口参数和返回值，而且相互间的调用不受约束。

- CPU有两种状态:核心态和用户态
  - 核心态：供操作系统使用，该状态下可以执行机器的所有指令
  - 用户态：供用户程序用，该状态下I/O操作和某些其他操作不能执行。
- 操作系统提供的服务（系统调用）的调用过程
  - 先将参数放入预先确定的寄存器或堆栈中，然后执行一条特殊的陷入指令，即访管指令或核心调用（kernel call）指令

##### 基本结构组成

- 一个用来调用被请求服务例程的主程序
- 一组执行系统调用的服务例程
- 一组支持服务例程的实用过程

### 分层结构

##### 定义

​	从资源管理观点出发，划分层次，在某一层次上代码只能调用低层次上的代码，使模块间的调用变为有序性

### 虚拟机

### 外核

<img src="外核.png" width=60%>

与容器虚拟化技术不同，每个虚拟机获取真实计算机的一个副本，占用部分系统资源，但只能使用分配给它的那部分资源。在内核态运行的最底层软件是一个称为外核的程序，

### 客户-服务器模型

